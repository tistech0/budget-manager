# Dockerfile for Backend Development with HOT RELOAD
FROM eclipse-temurin:21-jdk

WORKDIR /app

# Copy Maven wrapper files first
COPY .mvn ./.mvn
COPY mvnw mvnw.cmd ./
RUN chmod +x mvnw

# Copy pom.xml and download dependencies (cached layer)
COPY pom.xml .
RUN ./mvnw dependency:go-offline -B

# Copy source code
COPY src ./src

# Expose ports: 8080 (app), 5005 (debug)
EXPOSE 8080 5005

# Run Quarkus in dev mode with hot reload
CMD ["./mvnw", "quarkus:dev", "-Dquarkus.http.host=0.0.0.0", "-Ddebug=5005"]
